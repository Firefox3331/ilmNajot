{"ast":null,"code":"import{useNavigate}from'react-router-dom';import{apiCall}from'../utils/apiCall';import React from'react';import{useDispatch,useSelector}from'react-redux';import{getCurrentUser,getUserAdvertise}from'../store/slice/userReducer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const navigate=useNavigate();const{userAdvertise,currentUser}=useSelector(state=>state.userReducer);const dispatch=useDispatch();function submit(e){e.preventDefault();let data={username:e.target[0].value,password:e.target[1].value};apiCall('/auth/login','post',data,{}).then(res=>{console.log(res.data);dispatch(getCurrentUser({navigate}));dispatch(getUserAdvertise());localStorage.setItem(\"access_token\",res.data.access_token);localStorage.setItem(\"refresh_token\",res.data.refresh_token);});}return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card col-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,action:\"\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"text-center\",children:\"Login\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control my-2\",placeholder:\"Username...\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control my-2\",placeholder:\"Password...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning w-100\",children:\"submit\"}),/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:3000/register\",children:\"register\"})]})]})})})});}export default Login;","map":{"version":3,"names":["useNavigate","apiCall","React","useDispatch","useSelector","getCurrentUser","getUserAdvertise","jsx","_jsx","jsxs","_jsxs","Login","navigate","userAdvertise","currentUser","state","userReducer","dispatch","submit","e","preventDefault","data","username","target","value","password","then","res","console","log","localStorage","setItem","access_token","refresh_token","className","children","onSubmit","action","type","placeholder","href"],"sources":["D:/crud/src/pages/Login.js"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\r\nimport { apiCall } from '../utils/apiCall'\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getCurrentUser, getUserAdvertise } from '../store/slice/userReducer';\r\n\r\nfunction Login() {\r\n\r\n    const navigate = useNavigate();\r\n    const { userAdvertise, currentUser } = useSelector(state => state.userReducer);\r\n    const dispatch = useDispatch();\r\n\r\n    function submit(e) {\r\n        e.preventDefault();\r\n        let data = { username: e.target[0].value, password: e.target[1].value }\r\n        apiCall('/auth/login', 'post', data, {}).then(res => {\r\n            console.log(res.data);\r\n            dispatch(getCurrentUser({navigate}));\r\n            dispatch(getUserAdvertise());\r\n            localStorage.setItem(\"access_token\", res.data.access_token);\r\n            localStorage.setItem(\"refresh_token\", res.data.refresh_token);\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className='container'>\r\n            <div className=\"row d-flex justify-content-center\">\r\n                <div className=\"card col-5\">\r\n                    <form onSubmit={submit} action=\"\">\r\n                        <div className=\"card-header\">\r\n                            <h5 className='text-center'>Login</h5>\r\n                        </div>\r\n                        <div className=\"card-body\">\r\n                            <input type=\"text\" className='form-control my-2' placeholder='Username...' />\r\n                            <input type=\"text\" className='form-control my-2' placeholder='Password...' />\r\n                        </div>\r\n                        <div className=\"card-footer\">\r\n                            <button className='btn btn-warning w-100'>submit</button>\r\n                            <a href=\"http://localhost:3000/register\">register</a>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;"],"mappings":"AAAA,OAASA,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,OAAO,KAAQ,kBAAkB,CAC1C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,cAAc,CAAEC,gBAAgB,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE9E,QAAS,CAAAC,KAAKA,CAAA,CAAG,CAEb,KAAM,CAAAC,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEa,aAAa,CAAEC,WAAY,CAAC,CAAGV,WAAW,CAACW,KAAK,EAAIA,KAAK,CAACC,WAAW,CAAC,CAC9E,KAAM,CAAAC,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAE9B,QAAS,CAAAe,MAAMA,CAACC,CAAC,CAAE,CACfA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CAAAC,IAAI,CAAG,CAAEC,QAAQ,CAAEH,CAAC,CAACI,MAAM,CAAC,CAAC,CAAC,CAACC,KAAK,CAAEC,QAAQ,CAAEN,CAAC,CAACI,MAAM,CAAC,CAAC,CAAC,CAACC,KAAM,CAAC,CACvEvB,OAAO,CAAC,aAAa,CAAE,MAAM,CAAEoB,IAAI,CAAE,CAAC,CAAC,CAAC,CAACK,IAAI,CAACC,GAAG,EAAI,CACjDC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACN,IAAI,CAAC,CACrBJ,QAAQ,CAACZ,cAAc,CAAC,CAACO,QAAQ,CAAC,CAAC,CAAC,CACpCK,QAAQ,CAACX,gBAAgB,CAAC,CAAC,CAAC,CAC5BwB,YAAY,CAACC,OAAO,CAAC,cAAc,CAAEJ,GAAG,CAACN,IAAI,CAACW,YAAY,CAAC,CAC3DF,YAAY,CAACC,OAAO,CAAC,eAAe,CAAEJ,GAAG,CAACN,IAAI,CAACY,aAAa,CAAC,CACjE,CAAC,CAAC,CACN,CAEA,mBACIzB,IAAA,QAAK0B,SAAS,CAAC,WAAW,CAAAC,QAAA,cACtB3B,IAAA,QAAK0B,SAAS,CAAC,mCAAmC,CAAAC,QAAA,cAC9C3B,IAAA,QAAK0B,SAAS,CAAC,YAAY,CAAAC,QAAA,cACvBzB,KAAA,SAAM0B,QAAQ,CAAElB,MAAO,CAACmB,MAAM,CAAC,EAAE,CAAAF,QAAA,eAC7B3B,IAAA,QAAK0B,SAAS,CAAC,aAAa,CAAAC,QAAA,cACxB3B,IAAA,OAAI0B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,OAAK,CAAI,CAAC,CACrC,CAAC,cACNzB,KAAA,QAAKwB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtB3B,IAAA,UAAO8B,IAAI,CAAC,MAAM,CAACJ,SAAS,CAAC,mBAAmB,CAACK,WAAW,CAAC,aAAa,CAAE,CAAC,cAC7E/B,IAAA,UAAO8B,IAAI,CAAC,MAAM,CAACJ,SAAS,CAAC,mBAAmB,CAACK,WAAW,CAAC,aAAa,CAAE,CAAC,EAC5E,CAAC,cACN7B,KAAA,QAAKwB,SAAS,CAAC,aAAa,CAAAC,QAAA,eACxB3B,IAAA,WAAQ0B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,QAAM,CAAQ,CAAC,cACzD3B,IAAA,MAAGgC,IAAI,CAAC,gCAAgC,CAAAL,QAAA,CAAC,UAAQ,CAAG,CAAC,EACpD,CAAC,EACJ,CAAC,CACN,CAAC,CACL,CAAC,CACL,CAAC,CAEd,CAEA,cAAe,CAAAxB,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}